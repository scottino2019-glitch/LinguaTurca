<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impara il Turco - App Completa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        .turkish-font { font-family: 'Noto Sans', sans-serif; }
        .main-font { font-family: 'Inter', sans-serif; }
        
        .lesson-card {
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #4ade80, #22c55e);
            transition: width 0.5s ease;
        }
        
        .exercise-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            transition: all 0.3s ease;
        }
        
        .exercise-card:hover {
            transform: scale(1.02);
        }
        
        .grammar-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .writing-practice {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .audio-btn {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            transition: all 0.3s ease;
        }
        
        .audio-btn:hover {
            transform: scale(1.1);
        }
        
        .korean-char {
            font-size: 3rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .nav-tab {
            transition: all 0.3s ease;
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .lesson-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .exercise-option {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .exercise-option:hover {
            background-color: #e0e7ff;
            transform: translateX(5px);
        }
        
        .exercise-option.correct {
            background-color: #dcfce7;
            border-color: #22c55e;
        }
        
        .exercise-option.incorrect {
            background-color: #fef2f2;
            border-color: #ef4444;
        }
    </style>
</head>
<body class="main-font bg-gradient-to-br from-purple-50 via-blue-50 to-pink-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-red-500 to-orange-500 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold text-lg turkish-font">TR</span>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-800">Impara il Turco</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="bg-green-100 px-4 py-2 rounded-full">
                        <span class="text-green-800 font-semibold">Livello: Principiante</span>
                    </div>
                    <div class="w-32 bg-gray-200 rounded-full h-2">
                        <div class="progress-bar h-2 rounded-full" style="width: 35%"></div>
                    </div>
                    <span class="text-sm text-gray-600">35% completato</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-t">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex space-x-8 overflow-x-auto py-4">
                <button class="nav-tab active px-6 py-2 rounded-full font-medium whitespace-nowrap" onclick="showSection('lessons')">
                    üìö Lezioni
                </button>
                <button class="nav-tab px-6 py-2 rounded-full font-medium whitespace-nowrap" onclick="showSection('exercises')">
                    ‚úèÔ∏è Esercizi
                </button>
                <button class="nav-tab px-6 py-2 rounded-full font-medium whitespace-nowrap" onclick="showSection('grammar')">
                    üìñ Grammatica
                </button>
                <button class="nav-tab px-6 py-2 rounded-full font-medium whitespace-nowrap" onclick="showSection('writing')">
                    ‚úçÔ∏è Scrittura
                </button>
                <button class="nav-tab px-6 py-2 rounded-full font-medium whitespace-nowrap" onclick="showSection('vocabulary')">
                    üìù Vocabolario
                </button>
                <button class="nav-tab px-6 py-2 rounded-full font-medium whitespace-nowrap" onclick="showSection('progress')">
                    üìä Progressi
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Lessons Section -->
        <div id="lessons" class="section">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Lezioni Complete</h2>
                <p class="text-gray-600">Impara il turco passo dopo passo con le nostre lezioni interattive</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Lesson 1 -->
                <div class="lesson-card rounded-xl p-6 text-white cursor-pointer" onclick="openLesson(1)">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">Lezione 1</h3>
                        <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-sm">Completata ‚úì</span>
                    </div>
                    <h4 class="text-lg font-semibold mb-2">Alfabeto Turco</h4>
                    <p class="text-sm opacity-90 mb-4">Impara le lettere e i suoni dell'alfabeto turco</p>
                    <div class="flex justify-between items-center">
                        <span class="turkish-font text-2xl">A √á ƒû ƒ∞ √ñ ≈û √ú</span>
                        <span class="text-sm">25 min</span>
                    </div>
                </div>

                <!-- Lesson 2 -->
                <div class="lesson-card rounded-xl p-6 text-white cursor-pointer" onclick="openLesson(2)">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">Lezione 2</h3>
                        <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-sm">In corso</span>
                    </div>
                    <h4 class="text-lg font-semibold mb-2">Saluti e Presentazioni</h4>
                    <p class="text-sm opacity-90 mb-4">Come salutare e presentarsi in turco</p>
                    <div class="flex justify-between items-center">
                        <span class="turkish-font text-2xl">Merhaba</span>
                        <span class="text-sm">20 min</span>
                    </div>
                </div>

                <!-- Lesson 3 -->
                <div class="lesson-card rounded-xl p-6 text-white cursor-pointer" onclick="openLesson(3)">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">Lezione 3</h3>
                        <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-sm">Bloccata</span>
                    </div>
                    <h4 class="text-lg font-semibold mb-2">Numeri e Conteggio</h4>
                    <p class="text-sm opacity-90 mb-4">Numeri turchi e come contare</p>
                    <div class="flex justify-between items-center">
                        <span class="turkish-font text-2xl">bir iki √º√ß</span>
                        <span class="text-sm">30 min</span>
                    </div>
                </div>

                <!-- More lessons -->
                <div class="lesson-card rounded-xl p-6 text-white cursor-pointer" onclick="openLesson(4)">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">Lezione 4</h3>
                        <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-sm">Bloccata</span>
                    </div>
                    <h4 class="text-lg font-semibold mb-2">Famiglia e Relazioni</h4>
                    <p class="text-sm opacity-90 mb-4">Vocabolario per descrivere la famiglia</p>
                    <div class="flex justify-between items-center">
                        <span class="turkish-font text-2xl">aile</span>
                        <span class="text-sm">35 min</span>
                    </div>
                </div>

                <div class="lesson-card rounded-xl p-6 text-white cursor-pointer" onclick="openLesson(5)">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">Lezione 5</h3>
                        <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-sm">Bloccata</span>
                    </div>
                    <h4 class="text-lg font-semibold mb-2">Cibo e Ristoranti</h4>
                    <p class="text-sm opacity-90 mb-4">Ordinare cibo e parlare di cucina turca</p>
                    <div class="flex justify-between items-center">
                        <span class="turkish-font text-2xl">yemek</span>
                        <span class="text-sm">40 min</span>
                    </div>
                </div>

                <div class="lesson-card rounded-xl p-6 text-white cursor-pointer" onclick="openLesson(6)">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold">Lezione 6</h3>
                        <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-sm">Bloccata</span>
                    </div>
                    <h4 class="text-lg font-semibold mb-2">Tempo e Date</h4>
                    <p class="text-sm opacity-90 mb-4">Esprimere tempo, ore e date</p>
                    <div class="flex justify-between items-center">
                        <span class="turkish-font text-2xl">zaman</span>
                        <span class="text-sm">25 min</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Exercises Section -->
        <div id="exercises" class="section hidden">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Esercizi Interattivi</h2>
                <p class="text-gray-600">Metti alla prova le tue conoscenze con esercizi pratici</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="exercise-card rounded-xl p-6 text-white cursor-pointer" onclick="startExercise('alphabet')">
                    <h3 class="text-xl font-bold mb-2">Quiz Alfabeto</h3>
                    <p class="text-sm opacity-90 mb-4">Riconosci le lettere dell'alfabeto turco</p>
                    <div class="text-4xl">ƒû</div>
                </div>
                
                <div class="exercise-card rounded-xl p-6 text-white cursor-pointer" onclick="startExercise('vocabulary')">
                    <h3 class="text-xl font-bold mb-2">Vocabolario</h3>
                    <p class="text-sm opacity-90 mb-4">Abbina parole turche e italiane</p>
                    <div class="text-4xl turkish-font">kelime</div>
                </div>
                
                <div class="exercise-card rounded-xl p-6 text-white cursor-pointer" onclick="startExercise('listening')">
                    <h3 class="text-xl font-bold mb-2">Ascolto</h3>
                    <p class="text-sm opacity-90 mb-4">Ascolta e scegli la risposta corretta</p>
                    <div class="text-3xl">üéß</div>
                </div>
            </div>
        </div>

        <!-- Grammar Section -->
        <div id="grammar" class="section hidden">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Grammatica Turca</h2>
                <p class="text-gray-600">Comprendi le regole grammaticali fondamentali</p>
            </div>
            
            <div class="space-y-6">
                <div class="grammar-card rounded-xl p-6 text-white">
                    <h3 class="text-xl font-bold mb-4">Suffissi (Ekler)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">-ƒ±m/-im (Possessivo)</h4>
                            <p class="text-sm turkish-font">evim</p>
                            <p class="text-xs opacity-90">la mia casa</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">-de/-da (Locativo)</h4>
                            <p class="text-sm turkish-font">evde</p>
                            <p class="text-xs opacity-90">a casa / in casa</p>
                        </div>
                    </div>
                </div>
                
                <div class="grammar-card rounded-xl p-6 text-white">
                    <h3 class="text-xl font-bold mb-4">Armonia Vocalica</h3>
                    <div class="space-y-3">
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">Vocali Anteriori (e, i, √∂, √º)</h4>
                            <p class="text-sm turkish-font">ev ‚Üí evde</p>
                            <p class="text-xs opacity-90">casa ‚Üí a casa</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">Vocali Posteriori (a, ƒ±, o, u)</h4>
                            <p class="text-sm turkish-font">okul ‚Üí okulda</p>
                            <p class="text-xs opacity-90">scuola ‚Üí a scuola</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Writing Section -->
        <div id="writing" class="section hidden">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Pratica di Scrittura</h2>
                <p class="text-gray-600">Impara a scrivere le lettere turche</p>
            </div>
            
            <div class="writing-practice rounded-xl p-6 text-white">
                <h3 class="text-xl font-bold mb-4">Pratica Alfabeto Turco</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white bg-opacity-20 rounded-lg p-4 text-center cursor-pointer" onclick="practiceCharacter('√á')">
                        <div class="text-4xl text-white">√á</div>
                        <p class="text-sm">ch</p>
                    </div>
                    <div class="bg-white bg-opacity-20 rounded-lg p-4 text-center cursor-pointer" onclick="practiceCharacter('ƒû')">
                        <div class="text-4xl text-white">ƒû</div>
                        <p class="text-sm">ƒü (morbida)</p>
                    </div>
                    <div class="bg-white bg-opacity-20 rounded-lg p-4 text-center cursor-pointer" onclick="practiceCharacter('ƒ∞')">
                        <div class="text-4xl text-white">ƒ∞</div>
                        <p class="text-sm">i (con punto)</p>
                    </div>
                    <div class="bg-white bg-opacity-20 rounded-lg p-4 text-center cursor-pointer" onclick="practiceCharacter('≈û')">
                        <div class="text-4xl text-white">≈û</div>
                        <p class="text-sm">sh</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-6">
                    <h4 class="text-gray-800 font-semibold mb-4">Area di Pratica</h4>
                    <canvas id="writingCanvas" width="400" height="200" class="border-2 border-gray-300 rounded-lg cursor-crosshair"></canvas>
                    <div class="mt-4 space-x-4">
                        <button onclick="clearCanvas()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">Cancella</button>
                        <button onclick="checkWriting()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">Verifica</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vocabulary Section -->
        <div id="vocabulary" class="section hidden">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Vocabolario</h2>
                <p class="text-gray-600">Espandi il tuo vocabolario turco</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Saluti</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                            <div>
                                <p class="turkish-font text-lg">Merhaba</p>
                                <p class="text-sm text-gray-600">Ciao</p>
                            </div>
                            <button class="audio-btn w-8 h-8 rounded-full flex items-center justify-center text-white text-sm" onclick="playAudio('merhaba')">üîä</button>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                            <div>
                                <p class="turkish-font text-lg">G√ºnaydƒ±n</p>
                                <p class="text-sm text-gray-600">Buongiorno</p>
                            </div>
                            <button class="audio-btn w-8 h-8 rounded-full flex items-center justify-center text-white text-sm" onclick="playAudio('gunaydin')">üîä</button>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Famiglia</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                            <div>
                                <p class="turkish-font text-lg">Baba</p>
                                <p class="text-sm text-gray-600">Padre</p>
                            </div>
                            <button class="audio-btn w-8 h-8 rounded-full flex items-center justify-center text-white text-sm" onclick="playAudio('baba')">üîä</button>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                            <div>
                                <p class="turkish-font text-lg">Anne</p>
                                <p class="text-sm text-gray-600">Madre</p>
                            </div>
                            <button class="audio-btn w-8 h-8 rounded-full flex items-center justify-center text-white text-sm" onclick="playAudio('anne')">üîä</button>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Numeri</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                            <div>
                                <p class="turkish-font text-lg">Bir</p>
                                <p class="text-sm text-gray-600">Uno</p>
                            </div>
                            <button class="audio-btn w-8 h-8 rounded-full flex items-center justify-center text-white text-sm" onclick="playAudio('bir')">üîä</button>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                            <div>
                                <p class="turkish-font text-lg">ƒ∞ki</p>
                                <p class="text-sm text-gray-600">Due</p>
                            </div>
                            <button class="audio-btn w-8 h-8 rounded-full flex items-center justify-center text-white text-sm" onclick="playAudio('iki')">üîä</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Section -->
        <div id="progress" class="section hidden">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">I Tuoi Progressi</h2>
                <p class="text-gray-600">Monitora i tuoi miglioramenti nell'apprendimento</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Lezioni Completate</h3>
                    <div class="text-center">
                        <div class="text-4xl font-bold text-purple-600 mb-2">1/15</div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div class="bg-purple-600 h-3 rounded-full" style="width: 6.7%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">6.7% completato</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Parole Imparate</h3>
                    <div class="text-center">
                        <div class="text-4xl font-bold text-green-600 mb-2">47</div>
                        <p class="text-sm text-gray-600">Vocabolario attivo</p>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Streak Giornaliero</h3>
                    <div class="text-center">
                        <div class="text-4xl font-bold text-orange-600 mb-2">3</div>
                        <p class="text-sm text-gray-600">giorni consecutivi</p>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 text-center">
                <button onclick="resetProgress()" class="bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors">
                    üîÑ Resetta Progressi
                </button>
                <p class="text-sm text-gray-500 mt-2">Questo canceller√† tutti i progressi e ricomincer√† dall'inizio</p>
            </div>
        </div>
    </main>

    <!-- Lesson Modal -->
    <div id="lessonModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="lesson-content max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-xl p-8">
            <div class="flex justify-between items-center mb-6">
                <h2 id="lessonTitle" class="text-2xl font-bold text-gray-800"></h2>
                <button onclick="closeLesson()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            <div id="lessonContent"></div>
        </div>
    </div>

    <!-- Exercise Modal -->
    <div id="exerciseModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="lesson-content max-w-2xl w-full max-h-[90vh] overflow-y-auto rounded-xl p-8">
            <div class="flex justify-between items-center mb-6">
                <h2 id="exerciseTitle" class="text-2xl font-bold text-gray-800"></h2>
                <button onclick="closeExercise()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            <div id="exerciseContent"></div>
        </div>
    </div>

    <script>
        // Navigation
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Progress tracking
        let completedLessons = JSON.parse(localStorage.getItem('completedLessons') || '[]');
        let unlockedLessons = JSON.parse(localStorage.getItem('unlockedLessons') || '[1]'); // Lesson 1 is always unlocked

        // Update lesson cards based on progress
        function updateLessonCards() {
            const lessonCards = document.querySelectorAll('.lesson-card');
            lessonCards.forEach((card, index) => {
                const lessonNumber = index + 1;
                const statusSpan = card.querySelector('span');
                
                if (completedLessons.includes(lessonNumber)) {
                    statusSpan.textContent = 'Completata ‚úì';
                    statusSpan.className = 'bg-green-500 bg-opacity-90 px-2 py-1 rounded-full text-sm text-white';
                    card.style.opacity = '1';
                    card.style.cursor = 'pointer';
                } else if (unlockedLessons.includes(lessonNumber)) {
                    statusSpan.textContent = 'Disponibile';
                    statusSpan.className = 'bg-blue-500 bg-opacity-90 px-2 py-1 rounded-full text-sm text-white';
                    card.style.opacity = '1';
                    card.style.cursor = 'pointer';
                } else {
                    statusSpan.textContent = 'üîí Bloccata';
                    statusSpan.className = 'bg-gray-500 bg-opacity-90 px-2 py-1 rounded-full text-sm text-white';
                    card.style.opacity = '0.6';
                    card.style.cursor = 'not-allowed';
                }
            });
            
            // Update progress bar
            const progressPercentage = (completedLessons.length / 6) * 100;
            document.querySelector('.progress-bar').style.width = progressPercentage + '%';
            document.querySelector('.progress-bar').parentElement.nextElementSibling.textContent = Math.round(progressPercentage) + '% completato';
            
            // Update progress section
            const progressCard = document.querySelector('#progress .bg-white');
            if (progressCard) {
                progressCard.querySelector('.text-4xl').textContent = `${completedLessons.length}/6`;
                progressCard.querySelector('.bg-purple-600').style.width = progressPercentage + '%';
                progressCard.querySelector('.text-sm').textContent = Math.round(progressPercentage) + '% completato';
            }
        }

        // Lesson content data
        const lessons = {
            1: {
                title: "Lezione 1: Alfabeto Turco",
                content: `
                    <div class="space-y-6">
                        <div class="bg-blue-50 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">Introduzione all'Alfabeto Turco</h3>
                            <p class="mb-4">L'alfabeto turco moderno √® basato sull'alfabeto latino e contiene 29 lettere. √à stato adottato nel 1928 durante le riforme di Atat√ºrk, sostituendo l'alfabeto arabo ottomano.</p>
                            
                            <h4 class="font-bold mb-3">Lettere dell'Alfabeto Turco (29 lettere):</h4>
                            <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-6">
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">A a</div>
                                    <p class="text-sm font-semibold">[a]</p>
                                    <p class="text-xs text-gray-500">come in "casa"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('a')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">B b</div>
                                    <p class="text-sm font-semibold">[b]</p>
                                    <p class="text-xs text-gray-500">come in "bene"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('b')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">C c</div>
                                    <p class="text-sm font-semibold">[d í]</p>
                                    <p class="text-xs text-gray-500">come in "gioco"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('c')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-red-50 rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">√á √ß</div>
                                    <p class="text-sm font-semibold">[t É]</p>
                                    <p class="text-xs text-gray-500">come in "ciao"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('√ß')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">D d</div>
                                    <p class="text-sm font-semibold">[d]</p>
                                    <p class="text-xs text-gray-500">come in "dare"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('d')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">E e</div>
                                    <p class="text-sm font-semibold">[e]</p>
                                    <p class="text-xs text-gray-500">come in "bene"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('e')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">F f</div>
                                    <p class="text-sm font-semibold">[f]</p>
                                    <p class="text-xs text-gray-500">come in "fare"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('f')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">G g</div>
                                    <p class="text-sm font-semibold">[g]</p>
                                    <p class="text-xs text-gray-500">come in "gatto"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('g')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-red-50 rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">ƒû ƒü</div>
                                    <p class="text-sm font-semibold">[…£/‚àÖ]</p>
                                    <p class="text-xs text-gray-500">g morbida/silente</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('ƒü')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">H h</div>
                                    <p class="text-sm font-semibold">[h]</p>
                                    <p class="text-xs text-gray-500">come in inglese "house"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('h')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">I ƒ±</div>
                                    <p class="text-sm font-semibold">[…Ø]</p>
                                    <p class="text-xs text-gray-500">i senza punto</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('ƒ±')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-red-50 rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">ƒ∞ i</div>
                                    <p class="text-sm font-semibold">[i]</p>
                                    <p class="text-xs text-gray-500">come in "vino"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('i')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">J j</div>
                                    <p class="text-sm font-semibold">[ í]</p>
                                    <p class="text-xs text-gray-500">come in francese "je"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('j')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">K k</div>
                                    <p class="text-sm font-semibold">[k]</p>
                                    <p class="text-xs text-gray-500">come in "casa"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('k')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">L l</div>
                                    <p class="text-sm font-semibold">[l]</p>
                                    <p class="text-xs text-gray-500">come in "luna"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('l')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">M m</div>
                                    <p class="text-sm font-semibold">[m]</p>
                                    <p class="text-xs text-gray-500">come in "mare"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('m')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">N n</div>
                                    <p class="text-sm font-semibold">[n]</p>
                                    <p class="text-xs text-gray-500">come in "notte"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('n')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">O o</div>
                                    <p class="text-sm font-semibold">[o]</p>
                                    <p class="text-xs text-gray-500">come in "sole"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('o')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-red-50 rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">√ñ √∂</div>
                                    <p class="text-sm font-semibold">[√∏]</p>
                                    <p class="text-xs text-gray-500">come in francese "peu"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('√∂')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">P p</div>
                                    <p class="text-sm font-semibold">[p]</p>
                                    <p class="text-xs text-gray-500">come in "pane"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('p')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">R r</div>
                                    <p class="text-sm font-semibold">[r]</p>
                                    <p class="text-xs text-gray-500">r vibrante</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('r')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">S s</div>
                                    <p class="text-sm font-semibold">[s]</p>
                                    <p class="text-xs text-gray-500">come in "sole"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('s')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-red-50 rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">≈û ≈ü</div>
                                    <p class="text-sm font-semibold">[ É]</p>
                                    <p class="text-xs text-gray-500">come in "sciare"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('≈ü')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">T t</div>
                                    <p class="text-sm font-semibold">[t]</p>
                                    <p class="text-xs text-gray-500">come in "tavolo"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('t')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">U u</div>
                                    <p class="text-sm font-semibold">[u]</p>
                                    <p class="text-xs text-gray-500">come in "luna"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('u')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-red-50 rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">√ú √º</div>
                                    <p class="text-sm font-semibold">[y]</p>
                                    <p class="text-xs text-gray-500">come in francese "tu"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('√º')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">V v</div>
                                    <p class="text-sm font-semibold">[v]</p>
                                    <p class="text-xs text-gray-500">come in "vino"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('v')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">Y y</div>
                                    <p class="text-sm font-semibold">[j]</p>
                                    <p class="text-xs text-gray-500">come in "ieri"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('y')">üîä</button>
                                </div>
                                <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                                    <div class="turkish-font text-3xl mb-2">Z z</div>
                                    <p class="text-sm font-semibold">[z]</p>
                                    <p class="text-xs text-gray-500">come in "zero"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('z')">üîä</button>
                                </div>
                            </div>
                            
                            <h4 class="font-bold mb-3">Lettere Speciali Turche:</h4>
                            <div class="bg-orange-50 p-4 rounded-lg mb-6">
                                <p class="text-sm mb-3">Le lettere evidenziate in rosso sono uniche del turco e non esistono in italiano:</p>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                    <div class="text-center p-3 bg-red-100 rounded-lg">
                                        <div class="turkish-font text-2xl mb-1">√á √ß</div>
                                        <p class="text-xs">come "ciao"</p>
                                    </div>
                                    <div class="text-center p-3 bg-red-100 rounded-lg">
                                        <div class="turkish-font text-2xl mb-1">ƒû ƒü</div>
                                        <p class="text-xs">g morbida</p>
                                    </div>
                                    <div class="text-center p-3 bg-red-100 rounded-lg">
                                        <div class="turkish-font text-2xl mb-1">ƒ∞ i</div>
                                        <p class="text-xs">i con punto</p>
                                    </div>
                                    <div class="text-center p-3 bg-red-100 rounded-lg">
                                        <div class="turkish-font text-2xl mb-1">I ƒ±</div>
                                        <p class="text-xs">i senza punto</p>
                                    </div>
                                    <div class="text-center p-3 bg-red-100 rounded-lg">
                                        <div class="turkish-font text-2xl mb-1">√ñ √∂</div>
                                        <p class="text-xs">o con dieresi</p>
                                    </div>
                                    <div class="text-center p-3 bg-red-100 rounded-lg">
                                        <div class="turkish-font text-2xl mb-1">≈û ≈ü</div>
                                        <p class="text-xs">come "sciare"</p>
                                    </div>
                                    <div class="text-center p-3 bg-red-100 rounded-lg">
                                        <div class="turkish-font text-2xl mb-1">√ú √º</div>
                                        <p class="text-xs">u con dieresi</p>
                                    </div>
                                </div>
                            </div>
                            
                            <h4 class="font-bold mb-3">Esempi di Parole Turche:</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
                                <div class="p-4 bg-white rounded-lg shadow-sm border-l-4 border-purple-500">
                                    <div class="turkish-font text-2xl mb-2">ev</div>
                                    <p class="text-sm font-semibold">casa</p>
                                    <p class="text-xs text-gray-500">[ev]</p>
                                    <button class="audio-btn mt-2 px-2 py-1 rounded text-white text-xs" onclick="playAudio('ev')">üîä</button>
                                </div>
                                <div class="p-4 bg-white rounded-lg shadow-sm border-l-4 border-purple-500">
                                    <div class="turkish-font text-2xl mb-2">su</div>
                                    <p class="text-sm font-semibold">acqua</p>
                                    <p class="text-xs text-gray-500">[su]</p>
                                    <button class="audio-btn mt-2 px-2 py-1 rounded text-white text-xs" onclick="playAudio('su')">üîä</button>
                                </div>
                                <div class="p-4 bg-white rounded-lg shadow-sm border-l-4 border-blue-500">
                                    <div class="turkish-font text-2xl mb-2">√ßay</div>
                                    <p class="text-sm font-semibold">t√®</p>
                                    <p class="text-xs text-gray-500">[t Éaj]</p>
                                    <button class="audio-btn mt-2 px-2 py-1 rounded text-white text-xs" onclick="playAudio('√ßay')">üîä</button>
                                </div>
                                <div class="p-4 bg-white rounded-lg shadow-sm border-l-4 border-blue-500">
                                    <div class="turkish-font text-2xl mb-2">g√∂z</div>
                                    <p class="text-sm font-semibold">occhio</p>
                                    <p class="text-xs text-gray-500">[g√∏z]</p>
                                    <button class="audio-btn mt-2 px-2 py-1 rounded text-white text-xs" onclick="playAudio('g√∂z')">üîä</button>
                                </div>
                                <div class="p-4 bg-white rounded-lg shadow-sm border-l-4 border-green-500">
                                    <div class="turkish-font text-2xl mb-2">≈üeker</div>
                                    <p class="text-sm font-semibold">zucchero</p>
                                    <p class="text-xs text-gray-500">[ Éeker]</p>
                                    <button class="audio-btn mt-2 px-2 py-1 rounded text-white text-xs" onclick="playAudio('≈üeker')">üîä</button>
                                </div>
                                <div class="p-4 bg-white rounded-lg shadow-sm border-l-4 border-green-500">
                                    <div class="turkish-font text-2xl mb-2">g√ºzel</div>
                                    <p class="text-sm font-semibold">bello</p>
                                    <p class="text-xs text-gray-500">[gyzel]</p>
                                    <button class="audio-btn mt-2 px-2 py-1 rounded text-white text-xs" onclick="playAudio('g√ºzel')">üîä</button>
                                </div>
                                <div class="p-4 bg-white rounded-lg shadow-sm border-l-4 border-orange-500">
                                    <div class="turkish-font text-2xl mb-2">T√ºrkiye</div>
                                    <p class="text-sm font-semibold">Turchia</p>
                                    <p class="text-xs text-gray-500">[tyrkije]</p>
                                    <button class="audio-btn mt-2 px-2 py-1 rounded text-white text-xs" onclick="playAudio('t√ºrkiye')">üîä</button>
                                </div>
                                <div class="p-4 bg-white rounded-lg shadow-sm border-l-4 border-orange-500">
                                    <div class="turkish-font text-2xl mb-2">ƒ∞stanbul</div>
                                    <p class="text-sm font-semibold">Istanbul</p>
                                    <p class="text-xs text-gray-500">[istanbul]</p>
                                    <button class="audio-btn mt-2 px-2 py-1 rounded text-white text-xs" onclick="playAudio('istanbul')">üîä</button>
                                </div>
                            </div>
                            
                            <div class="bg-yellow-50 p-6 rounded-lg mb-6">
                                <h4 class="font-bold mb-3">üí° Regole di Pronuncia Importanti:</h4>
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-3">
                                        <span class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-white font-bold text-sm">1</span>
                                        <p class="text-sm"><strong>Ogni lettera si pronuncia:</strong> Non ci sono lettere mute in turco</p>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-white font-bold text-sm">2</span>
                                        <p class="text-sm"><strong>L'accento √® sempre sull'ultima sillaba:</strong> mer-HA-ba, ƒ∞s-tan-BUL</p>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-white font-bold text-sm">3</span>
                                        <p class="text-sm"><strong>ƒû (g morbida) allunga la vocale precedente:</strong> daƒü = [da:] (montagna)</p>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-white font-bold text-sm">4</span>
                                        <p class="text-sm"><strong>ƒ∞/i e I/ƒ± sono lettere diverse:</strong> ip (filo) ‚â† ƒ±p (corda)</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">Esercizio Pratico</h3>
                            <p class="mb-4">Prova a leggere queste sillabe:</p>
                            <div class="grid grid-cols-3 gap-4">
                                <div class="text-center p-4 bg-white rounded-lg cursor-pointer hover:bg-gray-50" onclick="checkReading('Í≥†', 'go')">
                                    <div class="korean-font text-3xl">Í≥†</div>
                                </div>
                                <div class="text-center p-4 bg-white rounded-lg cursor-pointer hover:bg-gray-50" onclick="checkReading('ÎàÑ', 'nu')">
                                    <div class="korean-font text-3xl">ÎàÑ</div>
                                </div>
                                <div class="text-center p-4 bg-white rounded-lg cursor-pointer hover:bg-gray-50" onclick="checkReading('ÎèÑ', 'do')">
                                    <div class="korean-font text-3xl">ÎèÑ</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <button onclick="closeLesson()" class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600">Chiudi</button>
                            <button onclick="completeLesson(1)" class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600">Completa Lezione</button>
                        </div>
                    </div>
                `
            },
            2: {
                title: "Lezione 2: Saluti e Presentazioni",
                content: `
                    <div class="space-y-6">
                        <div class="bg-purple-50 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">Saluti Quotidiani</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow-sm">
                                    <div>
                                        <div class="turkish-font text-2xl mb-1">Merhaba</div>
                                        <p class="text-gray-600 font-semibold">Ciao - saluto universale</p>
                                        <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">mer-ha-BA</span></p>
                                        <p class="text-xs text-blue-600">Usato in qualsiasi momento della giornata</p>
                                    </div>
                                    <button class="audio-btn px-4 py-2 rounded text-white" onclick="playAudio('merhaba')">üîä Ascolta</button>
                                </div>
                                
                                <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow-sm">
                                    <div>
                                        <div class="korean-font text-2xl mb-1">ÏïàÎÖïÌûà Í∞ÄÏÑ∏Ïöî</div>
                                        <p class="text-gray-600 font-semibold">Arrivederci (a chi va via)</p>
                                        <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">an-nyeong-hi ga-se-yo</span></p>
                                        <p class="text-xs text-blue-600">Letteralmente: "Andate in pace"</p>
                                    </div>
                                    <button class="audio-btn px-4 py-2 rounded text-white" onclick="playAudio('annyeonghigaseyo')">üîä Ascolta</button>
                                </div>
                                
                                <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow-sm">
                                    <div>
                                        <div class="korean-font text-2xl mb-1">ÏïàÎÖïÌûà Í≥ÑÏÑ∏Ïöî</div>
                                        <p class="text-gray-600 font-semibold">Arrivederci (a chi resta)</p>
                                        <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">an-nyeong-hi gye-se-yo</span></p>
                                        <p class="text-xs text-blue-600">Letteralmente: "Rimanete in pace"</p>
                                    </div>
                                    <button class="audio-btn px-4 py-2 rounded text-white" onclick="playAudio('annyeonghigyeseyo')">üîä Ascolta</button>
                                </div>
                                
                                <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow-sm">
                                    <div>
                                        <div class="korean-font text-2xl mb-1">Ï¢ãÏùÄ ÏïÑÏπ®ÏûÖÎãàÎã§</div>
                                        <p class="text-gray-600 font-semibold">Buongiorno (molto formale)</p>
                                        <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">jo-eun a-chim-im-ni-da</span></p>
                                        <p class="text-xs text-blue-600">Usato raramente nella conversazione quotidiana</p>
                                    </div>
                                    <button class="audio-btn px-4 py-2 rounded text-white" onclick="playAudio('joeunachimimnida')">üîä Ascolta</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-pink-50 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">Saluti Informali (ÏπúÍ∑ºÌïú Ïù∏ÏÇ¨)</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow-sm">
                                    <div>
                                        <div class="korean-font text-2xl mb-1">ÏïàÎÖï</div>
                                        <p class="text-gray-600 font-semibold">Ciao (informale)</p>
                                        <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">an-nyeong</span></p>
                                        <p class="text-xs text-blue-600">Usato con amici e persone della stessa et√†</p>
                                    </div>
                                    <button class="audio-btn px-4 py-2 rounded text-white" onclick="playAudio('annyeong')">üîä Ascolta</button>
                                </div>
                                
                                <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow-sm">
                                    <div>
                                        <div class="korean-font text-2xl mb-1">Ïûò Í∞Ä</div>
                                        <p class="text-gray-600 font-semibold">Ciao (informale, a chi va)</p>
                                        <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">jal ga</span></p>
                                        <p class="text-xs text-blue-600">Letteralmente: "Va bene"</p>
                                    </div>
                                    <button class="audio-btn px-4 py-2 rounded text-white" onclick="playAudio('jalga')">üîä Ascolta</button>
                                </div>
                                
                                <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow-sm">
                                    <div>
                                        <div class="korean-font text-2xl mb-1">Ïûò ÏûàÏñ¥</div>
                                        <p class="text-gray-600 font-semibold">Ciao (informale, a chi resta)</p>
                                        <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">jal is-seo</span></p>
                                        <p class="text-xs text-blue-600">Letteralmente: "Stai bene"</p>
                                    </div>
                                    <button class="audio-btn px-4 py-2 rounded text-white" onclick="playAudio('jalisseo')">üîä Ascolta</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-blue-50 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">Presentarsi (ÏûêÍ∏∞ÏÜåÍ∞ú)</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-white rounded-lg shadow-sm">
                                    <div class="korean-font text-xl mb-2">Ï†ÄÎäî [nome]ÏûÖÎãàÎã§</div>
                                    <p class="text-gray-600 font-semibold">Io sono [nome] (formale)</p>
                                    <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">jeo-neun [nome] im-ni-da</span></p>
                                    <p class="text-xs text-blue-600">Esempio: Ï†ÄÎäî ÎßàÎ•¥ÏΩîÏûÖÎãàÎã§ (jeo-neun ma-reu-ko im-ni-da)</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('jeoneunimnida')">üîä</button>
                                </div>
                                
                                <div class="p-4 bg-white rounded-lg shadow-sm">
                                    <div class="korean-font text-xl mb-2">Ï†ú Ïù¥Î¶ÑÏùÄ [nome]ÏòàÏöî</div>
                                    <p class="text-gray-600 font-semibold">Il mio nome √® [nome] (informale cortese)</p>
                                    <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">je i-reum-eun [nome] ye-yo</span></p>
                                    <p class="text-xs text-blue-600">Pi√π naturale nella conversazione quotidiana</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('jeireumeun')">üîä</button>
                                </div>
                                
                                <div class="p-4 bg-white rounded-lg shadow-sm">
                                    <div class="korean-font text-xl mb-2">ÎßåÎÇòÏÑú Î∞òÍ∞ëÏäµÎãàÎã§</div>
                                    <p class="text-gray-600 font-semibold">Piacere di conoscerti (formale)</p>
                                    <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">man-na-seo ban-gap-seum-ni-da</span></p>
                                    <p class="text-xs text-blue-600">Letteralmente: "Incontrando [te], sono felice"</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('mannaseobangapseumnida')">üîä</button>
                                </div>
                                
                                <div class="p-4 bg-white rounded-lg shadow-sm">
                                    <div class="korean-font text-xl mb-2">ÎßåÎÇòÏÑú Î∞òÍ∞ÄÏõåÏöî</div>
                                    <p class="text-gray-600 font-semibold">Piacere di conoscerti (informale cortese)</p>
                                    <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">man-na-seo ban-ga-wo-yo</span></p>
                                    <p class="text-xs text-blue-600">Versione pi√π casual e amichevole</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('mannaseobangawoyo')">üîä</button>
                                </div>
                                
                                <div class="p-4 bg-white rounded-lg shadow-sm">
                                    <div class="korean-font text-xl mb-2">Ïûò Î∂ÄÌÉÅÎìúÎ¶ΩÎãàÎã§</div>
                                    <p class="text-gray-600 font-semibold">Vi prego di trattarmi bene</p>
                                    <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">jal bu-tak-deu-rim-ni-da</span></p>
                                    <p class="text-xs text-blue-600">Espressione di cortesia dopo le presentazioni</p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('jalbutakdeurimnida')">üîä</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-orange-50 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">Domande Utili (Ïú†Ïö©Ìïú ÏßàÎ¨∏)</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-white rounded-lg shadow-sm">
                                    <div class="korean-font text-xl mb-2">Ïù¥Î¶ÑÏù¥ Î≠êÏòàÏöî?</div>
                                    <p class="text-gray-600 font-semibold">Come ti chiami?</p>
                                    <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">i-reum-i mwo-ye-yo?</span></p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('ireumimwoyeyo')">üîä</button>
                                </div>
                                
                                <div class="p-4 bg-white rounded-lg shadow-sm">
                                    <div class="korean-font text-xl mb-2">Ïñ¥ÎîîÏÑú ÏôîÏñ¥Ïöî?</div>
                                    <p class="text-gray-600 font-semibold">Da dove vieni?</p>
                                    <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">eo-di-seo wa-sseo-yo?</span></p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('eodiseowasseyo')">üîä</button>
                                </div>
                                
                                <div class="p-4 bg-white rounded-lg shadow-sm">
                                    <div class="korean-font text-xl mb-2">Ï†ÄÎäî Ïù¥ÌÉàÎ¶¨ÏïÑÏóêÏÑú ÏôîÏñ¥Ïöî</div>
                                    <p class="text-gray-600 font-semibold">Vengo dall'Italia</p>
                                    <p class="text-sm text-gray-500">Pronuncia: <span class="font-mono">jeo-neun i-tal-li-a-e-seo wa-sseo-yo</span></p>
                                    <button class="audio-btn mt-2 px-3 py-1 rounded text-white text-xs" onclick="playAudio('jeoneuniitalliaeseowasseyo')">üîä</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-yellow-50 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">Dialogo di Esempio</h3>
                            <div class="space-y-3">
                                <div class="p-3 bg-white rounded-lg border-l-4 border-blue-500">
                                    <p class="korean-font text-lg">A: ÏïàÎÖïÌïòÏÑ∏Ïöî!</p>
                                    <p class="text-sm text-gray-600">A: Ciao!</p>
                                </div>
                                <div class="p-3 bg-white rounded-lg border-l-4 border-green-500">
                                    <p class="korean-font text-lg">B: ÏïàÎÖïÌïòÏÑ∏Ïöî! Ï†ÄÎäî ÍπÄÎØºÏàòÏûÖÎãàÎã§.</p>
                                    <p class="text-sm text-gray-600">B: Ciao! Io sono Kim Minsu.</p>
                                </div>
                                <div class="p-3 bg-white rounded-lg border-l-4 border-blue-500">
                                    <p class="korean-font text-lg">A: ÎßåÎÇòÏÑú Î∞òÍ∞ëÏäµÎãàÎã§!</p>
                                    <p class="text-sm text-gray-600">A: Piacere di conoscerti!</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between">
                            <button onclick="closeLesson()" class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600">Chiudi</button>
                            <button onclick="completeLesson(2)" class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600">Completa Lezione</button>
                        </div>
                    </div>
                `
            }
        };

        // Exercise data
        const exercises = {
            hangul: {
                title: "Quiz Hangul",
                questions: [
                    {
                        question: "Quale suono rappresenta questo carattere?",
                        character: "„Ñ±",
                        options: ["g/k", "n", "d/t", "r/l"],
                        correct: 0
                    },
                    {
                        question: "Come si legge questa sillaba?",
                        character: "Í∞Ä",
                        options: ["na", "ga", "da", "ra"],
                        correct: 1
                    },
                    {
                        question: "Quale vocale √® questa?",
                        character: "„Öè",
                        options: ["eo", "o", "a", "u"],
                        correct: 2
                    }
                ]
            },
            vocabulary: {
                title: "Quiz Vocabolario",
                questions: [
                    {
                        question: "Cosa significa 'ÏïàÎÖïÌïòÏÑ∏Ïöî'?",
                        character: "ÏïàÎÖïÌïòÏÑ∏Ïöî",
                        options: ["Grazie", "Ciao", "Scusa", "Prego"],
                        correct: 1
                    },
                    {
                        question: "Come si dice 'famiglia' in coreano?",
                        character: "?",
                        options: ["ÏùåÏãù", "Í∞ÄÏ°±", "ÏãúÍ∞Ñ", "ÌïôÍµê"],
                        correct: 1
                    }
                ]
            }
        };

        let currentExercise = null;
        let currentQuestionIndex = 0;
        let score = 0;

        // Functions
        function openLesson(lessonNumber) {
            // Check if lesson is unlocked
            if (!unlockedLessons.includes(lessonNumber)) {
                alert('üîí Questa lezione √® bloccata! Completa prima le lezioni precedenti per sbloccarla.');
                return;
            }
            
            const lesson = lessons[lessonNumber];
            if (lesson) {
                document.getElementById('lessonTitle').textContent = lesson.title;
                document.getElementById('lessonContent').innerHTML = lesson.content;
                document.getElementById('lessonModal').classList.remove('hidden');
            }
        }

        function closeLesson() {
            document.getElementById('lessonModal').classList.add('hidden');
        }

        function completeLesson(lessonNumber) {
            // Mark lesson as completed
            if (!completedLessons.includes(lessonNumber)) {
                completedLessons.push(lessonNumber);
                localStorage.setItem('completedLessons', JSON.stringify(completedLessons));
                
                // Unlock next lesson
                const nextLesson = lessonNumber + 1;
                if (nextLesson <= 6 && !unlockedLessons.includes(nextLesson)) {
                    unlockedLessons.push(nextLesson);
                    localStorage.setItem('unlockedLessons', JSON.stringify(unlockedLessons));
                }
                
                // Update UI
                updateLessonCards();
                
                // Show completion message
                const nextLessonMessage = nextLesson <= 6 ? `\nüéâ Hai sbloccato la Lezione ${nextLesson}!` : '\nüèÜ Hai completato tutte le lezioni disponibili!';
                alert(`Congratulazioni! Hai completato la Lezione ${lessonNumber}!${nextLessonMessage}`);
            } else {
                alert(`Hai gi√† completato la Lezione ${lessonNumber}!`);
            }
            
            closeLesson();
        }

        function startExercise(exerciseType) {
            currentExercise = exercises[exerciseType];
            currentQuestionIndex = 0;
            score = 0;
            
            if (currentExercise) {
                document.getElementById('exerciseTitle').textContent = currentExercise.title;
                showQuestion();
                document.getElementById('exerciseModal').classList.remove('hidden');
            }
        }

        function showQuestion() {
            const question = currentExercise.questions[currentQuestionIndex];
            const content = `
                <div class="text-center mb-8">
                    <div class="korean-font text-6xl mb-4">${question.character}</div>
                    <h3 class="text-xl font-semibold mb-6">${question.question}</h3>
                    <div class="space-y-3">
                        ${question.options.map((option, index) => `
                            <div class="exercise-option p-4 border-2 border-gray-200 rounded-lg" onclick="selectAnswer(${index})">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                </div>
                <div class="text-center mt-6">
                    <p class="text-gray-600">Domanda ${currentQuestionIndex + 1} di ${currentExercise.questions.length}</p>
                </div>
            `;
            document.getElementById('exerciseContent').innerHTML = content;
        }

        function selectAnswer(selectedIndex) {
            const question = currentExercise.questions[currentQuestionIndex];
            const options = document.querySelectorAll('.exercise-option');
            
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect');
                }
                option.style.pointerEvents = 'none';
            });
            
            if (selectedIndex === question.correct) {
                score++;
            }
            
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < currentExercise.questions.length) {
                    showQuestion();
                } else {
                    showExerciseResults();
                }
            }, 1500);
        }

        function showExerciseResults() {
            const percentage = Math.round((score / currentExercise.questions.length) * 100);
            const content = `
                <div class="text-center">
                    <h3 class="text-2xl font-bold mb-4">Risultati</h3>
                    <div class="text-6xl mb-4">${percentage >= 70 ? 'üéâ' : 'üìö'}</div>
                    <p class="text-xl mb-2">Hai risposto correttamente a ${score} su ${currentExercise.questions.length} domande</p>
                    <p class="text-lg text-gray-600 mb-6">${percentage}% di accuratezza</p>
                    <div class="space-x-4">
                        <button onclick="closeExercise()" class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600">Chiudi</button>
                        <button onclick="startExercise('${Object.keys(exercises).find(key => exercises[key] === currentExercise)}')" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600">Riprova</button>
                    </div>
                </div>
            `;
            document.getElementById('exerciseContent').innerHTML = content;
        }

        function closeExercise() {
            document.getElementById('exerciseModal').classList.add('hidden');
        }

        function playAudio(word) {
            // Simulate audio playback
            console.log(`Playing audio for: ${word}`);
            alert(`üîä Audio simulato per: ${word}\n(Nota: L'audio non √® supportato in questa demo)`);
        }

        function practiceCharacter(char) {
            alert(`Pratica il carattere: ${char}\nUsa l'area di disegno qui sotto per esercitarti!`);
        }

        function checkReading(char, reading) {
            alert(`Carattere: ${char}\nLettura: ${reading}\nBravo! üëè`);
        }

        // Canvas for writing practice
        let canvas, ctx, isDrawing = false;

        window.onload = function() {
            // Initialize lesson cards
            updateLessonCards();
            
            // Initialize canvas
            canvas = document.getElementById('writingCanvas');
            if (canvas) {
                ctx = canvas.getContext('2d');
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 3;
                ctx.lineCap = 'round';

                canvas.addEventListener('mousedown', startDrawing);
                canvas.addEventListener('mousemove', draw);
                canvas.addEventListener('mouseup', stopDrawing);
                canvas.addEventListener('mouseout', stopDrawing);
            }
        };

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        function draw(e) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function checkWriting() {
            alert('Ottimo lavoro! Continua a praticare la scrittura! ‚úçÔ∏è');
        }

        function resetProgress() {
            if (confirm('Sei sicuro di voler resettare tutti i progressi? Questa azione non pu√≤ essere annullata.')) {
                localStorage.removeItem('completedLessons');
                localStorage.removeItem('unlockedLessons');
                completedLessons = [];
                unlockedLessons = [1];
                updateLessonCards();
                alert('‚úÖ Progressi resettati! Ora puoi ricominciare dall\'inizio.');
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96f2a146b709ed9f',t:'MTc1NTE5NzM0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
